{"remainingRequest":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/babel-loader/lib/index.js!/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangjiehui/Desktop/Personal/vue/HYMall/src/views/category/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/src/views/category/Category.vue","mtime":1584845842000},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/cache-loader/dist/cjs.js","mtime":1630335031083},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/cache-loader/dist/cjs.js","mtime":1630335031083},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/@babel/runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavBar from 'common/navbar/NavBar';\nimport TabMenu from './childComps/TabMenu';\nimport TabControl from 'content/tabControl/TabControl';\nimport Scroll from 'common/scroll/Scroll';\nimport TabContentCategory from './childComps/TabContentCategory';\nimport TabContentDetail from './childComps/TabContentDetail';\nimport { getCategory, getSubcategory, getCategoryDetail } from \"network/category\";\nimport { POP, SELL, NEW } from \"@/common/const\";\nimport { tabControlMixin } from \"@/common/mixin\";\nexport default {\n  name: \"Category\",\n  components: {\n    NavBar: NavBar,\n    TabMenu: TabMenu,\n    TabControl: TabControl,\n    Scroll: Scroll,\n    TabContentCategory: TabContentCategory,\n    TabContentDetail: TabContentDetail\n  },\n  mixins: [tabControlMixin],\n  data: function data() {\n    return {\n      categories: [],\n      categoryData: {},\n      currentIndex: -1\n    };\n  },\n  created: function created() {\n    // 1.请求分类数据\n    this._getCategory();\n  },\n  computed: {\n    showSubcategory: function showSubcategory() {\n      if (this.currentIndex === -1) return {};\n      return this.categoryData[this.currentIndex].subcategories;\n    },\n    showCategoryDetail: function showCategoryDetail() {\n      if (this.currentIndex === -1) return [];\n      return this.categoryData[this.currentIndex].categoryDetail[this.currentType];\n    }\n  },\n  methods: {\n    _getCategory: function _getCategory() {\n      var _this = this;\n\n      getCategory().then(function (res) {\n        // 1.获取分类数据\n        _this.categories = res.data.category.list; // 2.初始化每个类别的子数据\n\n        for (var i = 0; i < _this.categories.length; i++) {\n          _this.categoryData[i] = {\n            subcategories: {},\n            categoryDetail: {\n              'pop': [],\n              'new': [],\n              'sell': []\n            }\n          };\n        } // 3.请求第一个分类的数据\n\n\n        _this._getSubcategories(0);\n      });\n    },\n    _getSubcategories: function _getSubcategories(index) {\n      var _this2 = this;\n\n      this.currentIndex = index;\n      var mailKey = this.categories[index].maitKey;\n      getSubcategory(mailKey).then(function (res) {\n        _this2.categoryData[index].subcategories = res.data;\n        _this2.categoryData = _objectSpread({}, _this2.categoryData);\n\n        _this2._getCategoryDetail(POP);\n\n        _this2._getCategoryDetail(SELL);\n\n        _this2._getCategoryDetail(NEW);\n      });\n    },\n    _getCategoryDetail: function _getCategoryDetail(type) {\n      var _this3 = this;\n\n      // 1.获取请求的miniWallkey\n      var miniWallkey = this.categories[this.currentIndex].miniWallkey; // 2.发送请求,传入miniWallkey和type\n\n      getCategoryDetail(miniWallkey, type).then(function (res) {\n        // 3.将获取的数据保存下来\n        _this3.categoryData[_this3.currentIndex].categoryDetail[type] = res;\n        _this3.categoryData = _objectSpread({}, _this3.categoryData);\n      });\n    },\n\n    /**\n     * 事件响应相关的方法\n     */\n    selectItem: function selectItem(index) {\n      this._getSubcategories(index);\n    }\n  }\n};",{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA,OAAA,MAAA,MAAA,sBAAA;AAEA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,UAAA,MAAA,+BAAA;AACA,OAAA,MAAA,MAAA,sBAAA;AACA,OAAA,kBAAA,MAAA,iCAAA;AACA,OAAA,gBAAA,MAAA,+BAAA;AAEA,SAAA,WAAA,EAAA,cAAA,EAAA,iBAAA,QAAA,kBAAA;AACA,SAAA,GAAA,EAAA,IAAA,EAAA,GAAA,QAAA,gBAAA;AACA,SAAA,eAAA,QAAA,gBAAA;AAEA,eAAA;AACA,QAAA,UADA;AAEA,cAAA;AACA,kBADA;AAEA,oBAFA;AAGA,0BAHA;AAIA,kBAJA;AAKA,0CALA;AAMA;AANA,GAFA;AAUA,UAAA,CAAA,eAAA,CAVA;AAWA,MAXA,kBAWA;AACA,WAAA;AACA,kBAAA,EADA;AAEA,oBAAA,EAFA;AAIA,oBAAA,CAAA;AAJA,KAAA;AAMA,GAlBA;AAmBA,SAnBA,qBAmBA;AACA;AACA,SAAA,YAAA;AACA,GAtBA;AAuBA,YAAA;AACA,mBADA,6BACA;AACA,UAAA,KAAA,YAAA,KAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,aAAA,KAAA,YAAA,CAAA,KAAA,YAAA,EAAA,aAAA;AACA,KAJA;AAKA,sBALA,gCAKA;AACA,UAAA,KAAA,YAAA,KAAA,CAAA,CAAA,EAAA,OAAA,EAAA;AACA,aAAA,KAAA,YAAA,CAAA,KAAA,YAAA,EAAA,cAAA,CAAA,KAAA,WAAA,CAAA;AACA;AARA,GAvBA;AAiCA,WAAA;AACA,gBADA,0BACA;AAAA;;AACA,oBAAA,IAAA,CAAA,eAAA;AACA;AACA,cAAA,UAAA,GAAA,IAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAFA,CAGA;;AACA,aAAA,IAAA,IAAA,CAAA,EAAA,IAAA,MAAA,UAAA,CAAA,MAAA,EAAA,GAAA,EAAA;AACA,gBAAA,YAAA,CAAA,CAAA,IAAA;AACA,2BAAA,EADA;AAEA,4BAAA;AACA,qBAAA,EADA;AAEA,qBAAA,EAFA;AAGA,sBAAA;AAHA;AAFA,WAAA;AAQA,SAbA,CAcA;;;AACA,cAAA,iBAAA,CAAA,CAAA;AACA,OAhBA;AAiBA,KAnBA;AAoBA,qBApBA,6BAoBA,KApBA,EAoBA;AAAA;;AACA,WAAA,YAAA,GAAA,KAAA;AACA,UAAA,UAAA,KAAA,UAAA,CAAA,KAAA,EAAA,OAAA;AACA,qBAAA,OAAA,EAAA,IAAA,CAAA,eAAA;AACA,eAAA,YAAA,CAAA,KAAA,EAAA,aAAA,GAAA,IAAA,IAAA;AACA,eAAA,YAAA,qBAAA,OAAA,YAAA;;AACA,eAAA,kBAAA,CAAA,GAAA;;AACA,eAAA,kBAAA,CAAA,IAAA;;AACA,eAAA,kBAAA,CAAA,GAAA;AACA,OANA;AAOA,KA9BA;AA+BA,sBA/BA,8BA+BA,IA/BA,EA+BA;AAAA;;AACA;AACA,UAAA,cAAA,KAAA,UAAA,CAAA,KAAA,YAAA,EAAA,WAAA,CAFA,CAGA;;AACA,wBAAA,WAAA,EAAA,IAAA,EAAA,IAAA,CAAA,eAAA;AACA;AACA,eAAA,YAAA,CAAA,OAAA,YAAA,EAAA,cAAA,CAAA,IAAA,IAAA,GAAA;AACA,eAAA,YAAA,qBAAA,OAAA,YAAA;AACA,OAJA;AAKA,KAxCA;;AAyCA;;;AAGA,cA5CA,sBA4CA,KA5CA,EA4CA;AACA,WAAA,iBAAA,CAAA,KAAA;AACA;AA9CA;AAjCA,CAAA","sourcesContent":["<template>\n  <div id=\"category\">\n    <nav-bar class=\"nav-bar\"><div slot=\"center\">商品分类</div></nav-bar>\n    <div class=\"content\">\n      <tab-menu :categories=\"categories\"\n                @selectItem=\"selectItem\"></tab-menu>\n\n      <scroll id=\"tab-content\" :data=\"[categoryData]\">\n        <div>\n          <tab-content-category :subcategories=\"showSubcategory\"></tab-content-category>\n          <tab-control :titles=\"['综合', '新品', '销量']\"\n                       @itemClick=\"tabClick\"></tab-control>\n          <tab-content-detail :category-detail=\"showCategoryDetail\"></tab-content-detail>\n        </div>\n      </scroll>\n    </div>\n  </div>\n</template>\n\n<script>\n  import NavBar from 'common/navbar/NavBar'\n\n  import TabMenu from './childComps/TabMenu'\n  import TabControl from 'content/tabControl/TabControl'\n  import Scroll from 'common/scroll/Scroll'\n  import TabContentCategory from './childComps/TabContentCategory'\n  import TabContentDetail from './childComps/TabContentDetail'\n\n  import {getCategory, getSubcategory, getCategoryDetail} from \"network/category\";\n  import {POP, SELL, NEW} from \"@/common/const\";\n  import {tabControlMixin} from \"@/common/mixin\";\n\n  export default {\n\t\tname: \"Category\",\n    components: {\n\t\t  NavBar,\n      TabMenu,\n      TabControl,\n      Scroll,\n      TabContentCategory,\n      TabContentDetail\n    },\n    mixins: [tabControlMixin],\n    data() {\n\t\t  return {\n\t\t    categories: [],\n        categoryData: {\n        },\n        currentIndex: -1\n      }\n    },\n    created() {\n\t\t  // 1.请求分类数据\n      this._getCategory()\n    },\n    computed: {\n\t\t  showSubcategory() {\n\t\t    if (this.currentIndex === -1) return {}\n        return this.categoryData[this.currentIndex].subcategories\n      },\n      showCategoryDetail() {\n\t\t    if (this.currentIndex === -1) return []\n\t\t    return this.categoryData[this.currentIndex].categoryDetail[this.currentType]\n      }\n    },\n    methods: {\n\t\t  _getCategory() {\n\t\t    getCategory().then(res => {\n\t\t      // 1.获取分类数据\n\t\t      this.categories = res.data.category.list\n          // 2.初始化每个类别的子数据\n          for (let i = 0; i < this.categories.length; i++) {\n            this.categoryData[i] = {\n              subcategories: {},\n              categoryDetail: {\n                'pop': [],\n                'new': [],\n                'sell': []\n              }\n            }\n          }\n          // 3.请求第一个分类的数据\n          this._getSubcategories(0)\n        })\n      },\n      _getSubcategories(index) {\n        this.currentIndex = index;\n\t\t    const mailKey = this.categories[index].maitKey;\n        getSubcategory(mailKey).then(res => {\n          this.categoryData[index].subcategories = res.data\n          this.categoryData = {...this.categoryData}\n          this._getCategoryDetail(POP)\n          this._getCategoryDetail(SELL)\n          this._getCategoryDetail(NEW)\n        })\n      },\n      _getCategoryDetail(type) {\n\t\t    // 1.获取请求的miniWallkey\n        const miniWallkey = this.categories[this.currentIndex].miniWallkey;\n        // 2.发送请求,传入miniWallkey和type\n\t\t    getCategoryDetail(miniWallkey, type).then(res => {\n\t\t      // 3.将获取的数据保存下来\n\t\t      this.categoryData[this.currentIndex].categoryDetail[type] = res\n          this.categoryData = {...this.categoryData}\n        })\n      },\n      /**\n       * 事件响应相关的方法\n       */\n      selectItem(index) {\n        this._getSubcategories(index)\n      }\n    }\n\t}\n</script>\n\n<style scoped>\n  #category {\n    height: 100vh;\n  }\n\n  .nav-bar {\n    background-color: var(--color-tint);\n    font-weight: 700;\n    color: #fff;\n  }\n\n  .content {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 44px;\n    bottom: 49px;\n\n    display: flex;\n  }\n\n  #tab-content {\n    height: 100%;\n    flex: 1;\n  }\n</style>\n"],"sourceRoot":"src/views/category"}]}