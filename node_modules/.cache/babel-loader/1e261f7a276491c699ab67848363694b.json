{"remainingRequest":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/thread-loader/dist/cjs.js!/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/babel-loader/lib/index.js!/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangjiehui/Desktop/Personal/vue/HYMall/src/views/home/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/src/views/home/Home.vue","mtime":1584845842000},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/cache-loader/dist/cjs.js","mtime":1630335031083},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/cache-loader/dist/cjs.js","mtime":1630335031083},{"path":"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/huangjiehui/Desktop/Personal/vue/HYMall/node_modules/@babel/runtime/helpers/builtin/es6/toConsumableArray\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport NavBar from 'common/navbar/NavBar';\nimport Scroll from 'common/scroll/Scroll';\nimport TabControl from 'content/tabControl/TabControl';\nimport BackTop from 'content/backTop/BackTop';\nimport HomeSwiper from './childComps/HomeSwiper';\nimport FeatureView from './childComps/FeatureView';\nimport RecommendView from './childComps/RecommendView';\nimport GoodsList from './childComps/GoodsList';\nimport { getHomeMultidata, getHomeData, RECOMMEND, BANNER } from \"network/home\";\nimport { NEW, POP, SELL, BACKTOP_DISTANCE } from \"@/common/const\";\nexport default {\n  name: \"Home\",\n  components: {\n    NavBar: NavBar,\n    Scroll: Scroll,\n    TabControl: TabControl,\n    BackTop: BackTop,\n    HomeSwiper: HomeSwiper,\n    FeatureView: FeatureView,\n    RecommendView: RecommendView,\n    GoodsList: GoodsList\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommends: [],\n      goodsList: {\n        'pop': {\n          page: 1,\n          list: []\n        },\n        'new': {\n          page: 1,\n          list: []\n        },\n        'sell': {\n          page: 1,\n          list: []\n        }\n      },\n      currentType: POP,\n      isTabFixed: false,\n      tabOffsetTop: 0,\n      showBackTop: false\n    };\n  },\n  computed: {\n    showGoodsList: function showGoodsList() {\n      return this.goodsList[this.currentType].list;\n    }\n  },\n  created: function created() {\n    console.log('创建Home'); // 1.请求多个数据\n\n    this.getMultiData(); // 2.请求商品数据\n\n    this.getHomeProducts(POP);\n    this.getHomeProducts(NEW);\n    this.getHomeProducts(SELL);\n  },\n  activated: function activated() {\n    this.$refs.hSwiper.startTimer();\n  },\n  deactivated: function deactivated() {\n    this.$refs.hSwiper.stopTimer();\n  },\n  updated: function updated() {// this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\n    // console.log(this.tabOffsetTop);\n  },\n  methods: {\n    tabClick: function tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = POP;\n          break;\n\n        case 1:\n          this.currentType = NEW;\n          break;\n\n        case 2:\n          this.currentType = SELL;\n          break;\n      }\n    },\n    contentScroll: function contentScroll(position) {\n      // 1.决定tabFixed是否显示\n      this.isTabFixed = position.y < -this.tabOffsetTop; // 2.决定backTop是否显示\n\n      this.showBackTop = position.y < -BACKTOP_DISTANCE;\n    },\n    loadMore: function loadMore() {\n      this.getHomeProducts(this.currentType);\n    },\n    backTop: function backTop() {\n      this.$refs.scroll.scrollTo(0, 0, 300);\n    },\n\n    /**\n     * 网络请求相关方法\n     */\n    getMultiData: function getMultiData() {\n      var _this = this;\n\n      getHomeMultidata().then(function (res) {\n        _this.banners = res.data[BANNER].list;\n        _this.recommends = res.data[RECOMMEND].list; // 下次更新DOM时,获取新的tabOffsetTop值(不保险,可以在updated钩子中获取)\n\n        _this.$nextTick(function () {\n          _this.tabOffsetTop = _this.$refs.tabControl.$el.offsetTop;\n        });\n      });\n    },\n    getHomeProducts: function getHomeProducts(type) {\n      var _this2 = this;\n\n      getHomeData(type, this.goodsList[type].page).then(function (res) {\n        var _this2$goodsList$type;\n\n        var goodsList = res.data.list;\n\n        (_this2$goodsList$type = _this2.goodsList[type].list).push.apply(_this2$goodsList$type, _toConsumableArray(goodsList));\n\n        _this2.goodsList[type].page += 1;\n\n        _this2.$refs.scroll.finishPullUp();\n      });\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"home\">\n    <nav-bar class=\"nav-bar\"><div slot=\"center\">购物街</div></nav-bar>\n    <tab-control v-show=\"isTabFixed\" class=\"fixed\" @itemClick=\"tabClick\"\n                 :titles=\"['流行', '新款', '精选']\"></tab-control>\n    <scroll class=\"content\"\n            ref=\"scroll\"\n            @scroll=\"contentScroll\"\n            @pullingUp=\"loadMore\"\n            :data=\"showGoodsList\"\n            :pull-up-load=\"true\"\n            :probe-type=\"3\">\n      <div>\n        <home-swiper :banners=\"banners\"\n                     ref=\"hSwiper\"></home-swiper>\n        <feature-view :features=\"recommends\"></feature-view>\n        <recommend-view></recommend-view>\n        <tab-control @itemClick=\"tabClick\"\n                     :titles=\"['流行', '新款', '精选']\"\n                     ref=\"tabControl\"></tab-control>\n        <goods-list :goods-list=\"showGoodsList\"></goods-list>\n      </div>\n    </scroll>\n    <back-top @backTop=\"backTop\" class=\"back-top\" v-show=\"showBackTop\">\n      <img src=\"~assets/img/common/top.png\" alt=\"\">\n    </back-top>\n  </div>\n</template>\n\n<script>\n  import NavBar from 'common/navbar/NavBar'\n  import Scroll from 'common/scroll/Scroll'\n  import TabControl from 'content/tabControl/TabControl'\n  import BackTop from 'content/backTop/BackTop'\n  import HomeSwiper from './childComps/HomeSwiper'\n  import FeatureView from './childComps/FeatureView'\n  import RecommendView from './childComps/RecommendView'\n  import GoodsList from './childComps/GoodsList'\n  import {getHomeMultidata, getHomeData, RECOMMEND, BANNER} from \"network/home\";\n  import {NEW, POP, SELL, BACKTOP_DISTANCE} from \"@/common/const\";\n\n  export default {\n\t\tname: \"Home\",\n    components: {\n\t\t  NavBar,\n      Scroll,\n      TabControl,\n      BackTop,\n      HomeSwiper,\n      FeatureView,\n      RecommendView,\n      GoodsList,\n    },\n    data() {\n\t\t  return {\n\t\t    banners: [],\n        recommends: [],\n        goodsList: {\n          'pop': {page: 1, list: []},\n          'new': {page: 1, list: []},\n          'sell': {page: 1, list: []}\n        },\n        currentType: POP,\n        isTabFixed: false,\n        tabOffsetTop: 0,\n        showBackTop: false\n      }\n    },\n    computed: {\n\t\t  showGoodsList() {\n\t\t    return this.goodsList[this.currentType].list\n      }\n    },\n    created() {\n      console.log('创建Home');\n      // 1.请求多个数据\n      this.getMultiData()\n\n      // 2.请求商品数据\n      this.getHomeProducts(POP)\n      this.getHomeProducts(NEW)\n      this.getHomeProducts(SELL)\n    },\n    activated: function () {\n      this.$refs.hSwiper.startTimer()\n    },\n    deactivated: function () {\n      this.$refs.hSwiper.stopTimer()\n    },\n    updated() {\n      // this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\n      // console.log(this.tabOffsetTop);\n    },\n    methods: {\n\t\t  tabClick(index) {\n\t\t    switch (index) {\n          case 0:\n            this.currentType = POP\n            break\n          case 1:\n            this.currentType = NEW\n            break\n          case 2:\n            this.currentType = SELL\n            break\n        }\n      },\n      contentScroll(position) {\n\t\t    // 1.决定tabFixed是否显示\n        this.isTabFixed = position.y < -this.tabOffsetTop\n\n        // 2.决定backTop是否显示\n        this.showBackTop = position.y < -BACKTOP_DISTANCE\n      },\n      loadMore() {\n\t\t    this.getHomeProducts(this.currentType)\n      },\n      backTop() {\n        this.$refs.scroll.scrollTo(0, 0, 300)\n      },\n      /**\n       * 网络请求相关方法\n       */\n      getMultiData() {\n        getHomeMultidata().then(res => {\n          this.banners = res.data[BANNER].list\n          this.recommends = res.data[RECOMMEND].list\n          // 下次更新DOM时,获取新的tabOffsetTop值(不保险,可以在updated钩子中获取)\n          this.$nextTick(() => {\n            this.tabOffsetTop = this.$refs.tabControl.$el.offsetTop\n          })\n        })\n      },\n      getHomeProducts(type) {\n        getHomeData(type, this.goodsList[type].page).then(res => {\n          const goodsList = res.data.list;\n          this.goodsList[type].list.push(...goodsList)\n          this.goodsList[type].page += 1\n\n          this.$refs.scroll.finishPullUp()\n        })\n      }\n    }\n\t}\n</script>\n\n<style scoped>\n  #home {\n    /*position: relative;*/\n    height: 100vh;\n  }\n\n  .nav-bar {\n    background-color: var(--color-tint);\n    font-weight: 700;\n    color: #fff;\n  }\n\n  .content {\n    position: absolute;\n    top: 44px;\n    bottom: 49px;\n    left: 0;\n    right: 0;\n  }\n\n  .fixed {\n    position: fixed;\n    top: 44px;\n    left: 0;\n    right: 0;\n  }\n\n  .back-top {\n    position: fixed;\n    right: 10px;\n    bottom: 60px;\n  }\n</style>\n"],"sourceRoot":"src/views/home"}]}